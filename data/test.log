/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
INSERT INTO ARTISTS VALUES(1,'APATA JEAN-MICHEL',NULL)
COMMIT
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
drop table if exists artists cascade 
drop table if exists billets cascade 
drop table if exists commandes cascade 
drop table if exists event_guests cascade 
drop table if exists events cascade 
drop table if exists organizers cascade 
drop table if exists type_billet cascade 
drop table if exists users cascade 
create table artists (id bigint generated by default as identity (start with 1), nomArtiste varchar(255) not null, photoUrl varchar(255), primary key (id))
create table billets (commande_id bigint not null, id bigint generated by default as identity (start with 1), type_billet_id bigint not null, code_barre varchar(255) not null unique, primary key (id))
create table commandes (montantTotal float(53), date timestamp(6), id bigint generated by default as identity (start with 1), user_id bigint not null, statut varchar(255) not null check (statut in ('ANNULE','REMBOURSE','VALIDEE')), primary key (id))
create table event_guests (id_artist bigint not null, id_event bigint not null)
create table events (date date, heure time(6), nbplaces integer, id bigint generated by default as identity (start with 1), id_organizer bigint not null, main_artist_id bigint, description varchar(2000), genreMusical varchar(255) check (genreMusical in ('POP','ROCK','SHATTA','JAZZ','HIP_HOP','ELECTRO','RAP')), lieu varchar(255), nom varchar(255), primary key (id))
create table organizers (id bigint not null, nom_organisation varchar(255), primary key (id))
create table type_billet (prix float(53) not null, stock integer not null, event_id bigint not null, id bigint generated by default as identity (start with 1), type varchar(255) not null check (type in ('GrandPublic','VIP','EARLY_BIRD')), primary key (id))
create table users (id bigint generated by default as identity (start with 1), email varchar(255), mdp varchar(255), nom varchar(255), primary key (id))
alter table billets add constraint FKfowkx4rqpow7effcixe0uhv58 foreign key (commande_id) references commandes
alter table billets add constraint FKoyo73lfing4and7buowtiygxp foreign key (type_billet_id) references type_billet
alter table commandes add constraint FKavy0l3h0s3v20uoi8dfcq9ipc foreign key (user_id) references users
alter table event_guests add constraint FKmnr4sfahpiughiqb7ga7i2kli foreign key (id_artist) references artists
alter table event_guests add constraint FKphjw3hs11iyovyho5tg7coum9 foreign key (id_event) references events
alter table events add constraint FKer292l54tqjrd938l4gm4d2n foreign key (main_artist_id) references artists
alter table events add constraint FK8gx13k1k0jwvgi8q8jxjp8y5i foreign key (id_organizer) references organizers
alter table organizers add constraint FKknfg9jndm0r8mji804i38y1tb foreign key (id) references users
alter table type_billet add constraint FKqke1qu6tmwiq6xwma73lh047i foreign key (event_id) references events
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
drop table if exists artists cascade 
drop table if exists billets cascade 
drop table if exists commandes cascade 
drop table if exists event_guests cascade 
drop table if exists events cascade 
drop table if exists organizers cascade 
drop table if exists type_billet cascade 
drop table if exists users cascade 
create table artists (id bigint generated by default as identity (start with 1), nomArtiste varchar(255) not null, photoUrl varchar(255), primary key (id))
create table billets (commande_id bigint not null, id bigint generated by default as identity (start with 1), type_billet_id bigint not null, code_barre varchar(255) not null unique, primary key (id))
create table commandes (montantTotal float(53), date timestamp(6), id bigint generated by default as identity (start with 1), user_id bigint not null, statut varchar(255) not null check (statut in ('ANNULE','REMBOURSE','VALIDEE')), primary key (id))
create table event_guests (id_artist bigint not null, id_event bigint not null)
create table events (date date, heure time(6), nbplaces integer, id bigint generated by default as identity (start with 1), id_organizer bigint not null, main_artist_id bigint, description varchar(2000), genreMusical varchar(255) check (genreMusical in ('POP','ROCK','SHATTA','JAZZ','HIP_HOP','ELECTRO','RAP')), lieu varchar(255), nom varchar(255), primary key (id))
create table organizers (id bigint not null, nom_organisation varchar(255), primary key (id))
create table type_billet (prix float(53) not null, stock integer not null, event_id bigint not null, id bigint generated by default as identity (start with 1), type varchar(255) not null check (type in ('GrandPublic','VIP','EARLY_BIRD')), primary key (id))
create table users (id bigint generated by default as identity (start with 1), email varchar(255), mdp varchar(255), nom varchar(255), primary key (id))
alter table billets add constraint FKfowkx4rqpow7effcixe0uhv58 foreign key (commande_id) references commandes
alter table billets add constraint FKoyo73lfing4and7buowtiygxp foreign key (type_billet_id) references type_billet
alter table commandes add constraint FKavy0l3h0s3v20uoi8dfcq9ipc foreign key (user_id) references users
alter table event_guests add constraint FKmnr4sfahpiughiqb7ga7i2kli foreign key (id_artist) references artists
alter table event_guests add constraint FKphjw3hs11iyovyho5tg7coum9 foreign key (id_event) references events
alter table events add constraint FKer292l54tqjrd938l4gm4d2n foreign key (main_artist_id) references artists
alter table events add constraint FK8gx13k1k0jwvgi8q8jxjp8y5i foreign key (id_organizer) references organizers
alter table organizers add constraint FKknfg9jndm0r8mji804i38y1tb foreign key (id) references users
alter table type_billet add constraint FKqke1qu6tmwiq6xwma73lh047i foreign key (event_id) references events
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
drop table if exists artists cascade 
drop table if exists billets cascade 
drop table if exists commandes cascade 
drop table if exists event_guests cascade 
drop table if exists events cascade 
drop table if exists organizers cascade 
drop table if exists type_billet cascade 
drop table if exists users cascade 
create table artists (id bigint generated by default as identity (start with 1), nomArtiste varchar(255) not null, photoUrl varchar(255), primary key (id))
create table billets (commande_id bigint not null, id bigint generated by default as identity (start with 1), type_billet_id bigint not null, code_barre varchar(255) not null unique, primary key (id))
create table commandes (montantTotal float(53), date timestamp(6), id bigint generated by default as identity (start with 1), user_id bigint not null, statut varchar(255) not null check (statut in ('ANNULE','REMBOURSE','VALIDEE')), primary key (id))
create table event_guests (id_artist bigint not null, id_event bigint not null)
create table events (date date, heure time(6), nbplaces integer, id bigint generated by default as identity (start with 1), id_organizer bigint, main_artist_id bigint, description varchar(2000), genreMusical varchar(255) check (genreMusical in ('POP','ROCK','SHATTA','JAZZ','HIP_HOP','ELECTRO','RAP')), lieu varchar(255), nom varchar(255), primary key (id))
create table organizers (id bigint not null, nom_organisation varchar(255), primary key (id))
create table type_billet (prix float(53) not null, stock integer not null, event_id bigint not null, id bigint generated by default as identity (start with 1), type varchar(255) not null check (type in ('GrandPublic','VIP','EARLY_BIRD')), primary key (id))
create table users (id bigint generated by default as identity (start with 1), email varchar(255), mdp varchar(255), nom varchar(255), primary key (id))
alter table billets add constraint FKfowkx4rqpow7effcixe0uhv58 foreign key (commande_id) references commandes
alter table billets add constraint FKoyo73lfing4and7buowtiygxp foreign key (type_billet_id) references type_billet
alter table commandes add constraint FKavy0l3h0s3v20uoi8dfcq9ipc foreign key (user_id) references users
alter table event_guests add constraint FKmnr4sfahpiughiqb7ga7i2kli foreign key (id_artist) references artists
alter table event_guests add constraint FKphjw3hs11iyovyho5tg7coum9 foreign key (id_event) references events
alter table events add constraint FKer292l54tqjrd938l4gm4d2n foreign key (main_artist_id) references artists
alter table events add constraint FK8gx13k1k0jwvgi8q8jxjp8y5i foreign key (id_organizer) references organizers
alter table organizers add constraint FKknfg9jndm0r8mji804i38y1tb foreign key (id) references users
alter table type_billet add constraint FKqke1qu6tmwiq6xwma73lh047i foreign key (event_id) references events
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
drop table if exists artists cascade 
drop table if exists billets cascade 
drop table if exists commandes cascade 
drop table if exists event_guests cascade 
drop table if exists events cascade 
drop table if exists organizers cascade 
drop table if exists type_billet cascade 
drop table if exists users cascade 
create table artists (id bigint generated by default as identity (start with 1), nomArtiste varchar(255) not null, photoUrl varchar(255), primary key (id))
create table billets (commande_id bigint not null, id bigint generated by default as identity (start with 1), type_billet_id bigint not null, code_barre varchar(255) not null unique, primary key (id))
create table commandes (montantTotal float(53), date timestamp(6), id bigint generated by default as identity (start with 1), user_id bigint not null, statut varchar(255) not null check (statut in ('ANNULE','REMBOURSE','VALIDEE')), primary key (id))
create table event_guests (id_artist bigint not null, id_event bigint not null)
create table events (date date, heure time(6), nbplaces integer, id bigint generated by default as identity (start with 1), id_organizer bigint, main_artist_id bigint, description varchar(2000), genreMusical varchar(255) check (genreMusical in ('POP','ROCK','SHATTA','JAZZ','HIP_HOP','ELECTRO','RAP')), lieu varchar(255), nom varchar(255), primary key (id))
create table organizers (id bigint not null, nom_organisation varchar(255), primary key (id))
create table type_billet (prix float(53) not null, stock integer not null, event_id bigint not null, id bigint generated by default as identity (start with 1), type varchar(255) not null check (type in ('GrandPublic','VIP','EARLY_BIRD')), primary key (id))
create table users (id bigint generated by default as identity (start with 1), email varchar(255), mdp varchar(255), nom varchar(255), primary key (id))
alter table billets add constraint FKfowkx4rqpow7effcixe0uhv58 foreign key (commande_id) references commandes
alter table billets add constraint FKoyo73lfing4and7buowtiygxp foreign key (type_billet_id) references type_billet
alter table commandes add constraint FKavy0l3h0s3v20uoi8dfcq9ipc foreign key (user_id) references users
alter table event_guests add constraint FKmnr4sfahpiughiqb7ga7i2kli foreign key (id_artist) references artists
alter table event_guests add constraint FKphjw3hs11iyovyho5tg7coum9 foreign key (id_event) references events
alter table events add constraint FKer292l54tqjrd938l4gm4d2n foreign key (main_artist_id) references artists
alter table events add constraint FK8gx13k1k0jwvgi8q8jxjp8y5i foreign key (id_organizer) references organizers
alter table organizers add constraint FKknfg9jndm0r8mji804i38y1tb foreign key (id) references users
alter table type_billet add constraint FKqke1qu6tmwiq6xwma73lh047i foreign key (event_id) references events
INSERT INTO EVENTS VALUES(NULL,NULL,200,1,NULL,NULL,'POUR LES CHOCOS DE BABI',NULL,'ABIDJAN','LAST FUN')
COMMIT
