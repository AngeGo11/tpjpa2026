SET DATABASE UNIQUE NAME HSQLDB9C09E9DCE3
SET DATABASE DEFAULT RESULT MEMORY ROWS 0
SET DATABASE EVENT LOG LEVEL 0
SET DATABASE TRANSACTION CONTROL LOCKS
SET DATABASE DEFAULT ISOLATION LEVEL READ COMMITTED
SET DATABASE TRANSACTION ROLLBACK ON CONFLICT TRUE
SET DATABASE TEXT TABLE DEFAULTS ''
SET DATABASE SQL NAMES FALSE
SET DATABASE SQL RESTRICT EXEC FALSE
SET DATABASE SQL REFERENCES FALSE
SET DATABASE SQL SIZE TRUE
SET DATABASE SQL TYPES FALSE
SET DATABASE SQL TDC DELETE TRUE
SET DATABASE SQL TDC UPDATE TRUE
SET DATABASE SQL SYS INDEX NAMES TRUE
SET DATABASE SQL CONCAT NULLS TRUE
SET DATABASE SQL UNIQUE NULLS TRUE
SET DATABASE SQL CONVERT TRUNCATE TRUE
SET DATABASE SQL AVG SCALE 0
SET DATABASE SQL DOUBLE NAN TRUE
SET FILES WRITE DELAY 500 MILLIS
SET FILES BACKUP INCREMENT TRUE
SET FILES CACHE SIZE 10000
SET FILES CACHE ROWS 50000
SET FILES SCALE 32
SET FILES LOB SCALE 32
SET FILES DEFRAG 0
SET FILES NIO TRUE
SET FILES NIO SIZE 256
SET FILES LOG TRUE
SET FILES LOG SIZE 50
SET FILES CHECK 343
SET DATABASE COLLATION "SQL_TEXT" PAD SPACE
CREATE USER SA PASSWORD DIGEST 'd41d8cd98f00b204e9800998ecf8427e'
ALTER USER SA SET LOCAL TRUE
CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE SEQUENCE PUBLIC.DEPARTMENT_SEQ AS INTEGER START WITH 1 INCREMENT BY 50
CREATE SEQUENCE PUBLIC.EMPLOYEE_SEQ AS INTEGER START WITH 1 INCREMENT BY 50
CREATE MEMORY TABLE PUBLIC.DEPARTMENT(ID BIGINT NOT NULL PRIMARY KEY,NAME VARCHAR(255))
CREATE MEMORY TABLE PUBLIC.EMPLOYEE(DEPARTMENT_ID BIGINT,ID BIGINT NOT NULL PRIMARY KEY,NAME VARCHAR(255),CONSTRAINT FK14TIJXQRY9ML17NK86SQFP561 FOREIGN KEY(DEPARTMENT_ID) REFERENCES PUBLIC.DEPARTMENT(ID))
CREATE MEMORY TABLE PUBLIC.ARTISTE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDROLE BIGINT NOT NULL,NOMARTISTE VARCHAR(255) NOT NULL)
ALTER TABLE PUBLIC.ARTISTE ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.ARTISTE_GENRE(ID_ARTISTE BIGINT NOT NULL,ID_GENRE BIGINT NOT NULL,CONSTRAINT FK1592GTHUD4JDARYDM1BURJ0E9 FOREIGN KEY(ID_ARTISTE) REFERENCES PUBLIC.ARTISTE(ID))
CREATE MEMORY TABLE PUBLIC.BILLETS_VENDUS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDEVENTCATEG BIGINT NOT NULL,IDPAIEMENT BIGINT NOT NULL,CODEBARRE VARCHAR(255) NOT NULL,UNIQUE(CODEBARRE))
ALTER TABLE PUBLIC.BILLETS_VENDUS ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.EVENT_GUESTS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,ID_ARTIST BIGINT NOT NULL,ID_EVENT BIGINT NOT NULL,CONSTRAINT FK7QTH808UEMJLPNEW3J1TR4WAS FOREIGN KEY(ID_ARTIST) REFERENCES PUBLIC.ARTISTE(ID))
ALTER TABLE PUBLIC.EVENT_GUESTS ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.EVENTS(DATE DATE,HEURE TIME(6),NBPLACES INTEGER,ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDGENREMUSICAL BIGINT,IDORGANIZER BIGINT NOT NULL,DESCRIPTION VARCHAR(2000),LIEU VARCHAR(255),NOM VARCHAR(255) NOT NULL)
ALTER TABLE PUBLIC.EVENTS ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.EVENTS_CATEGORY(PRIX DOUBLE NOT NULL,STOCK INTEGER NOT NULL,ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,ID_TYPETICKET BIGINT NOT NULL,ID_EVENT BIGINT NOT NULL,CONSTRAINT FKSSXETWY7I4GJSFMNKX90UK8DD FOREIGN KEY(ID_EVENT) REFERENCES PUBLIC.EVENTS(ID))
ALTER TABLE PUBLIC.EVENTS_CATEGORY ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.FAVORIS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDEVENT BIGINT NOT NULL,IDUSER BIGINT NOT NULL,CONSTRAINT FKMOUBU85HHNMCUI2HWSL1QFK05 FOREIGN KEY(IDEVENT) REFERENCES PUBLIC.EVENTS(ID))
ALTER TABLE PUBLIC.FAVORIS ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.GENRE_MUSICAL(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NOM_GENRE VARCHAR(255) NOT NULL)
ALTER TABLE PUBLIC.GENRE_MUSICAL ALTER COLUMN ID RESTART WITH 5
CREATE MEMORY TABLE PUBLIC.HISTORIQUE_EVENT(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDEVENT BIGINT NOT NULL,IDUSER BIGINT NOT NULL,CONSTRAINT FKDLRQRGVWEO0WNUMTSH7J9LGI1 FOREIGN KEY(IDEVENT) REFERENCES PUBLIC.EVENTS(ID))
ALTER TABLE PUBLIC.HISTORIQUE_EVENT ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.ORGANIZER(IDUSER BIGINT NOT NULL PRIMARY KEY,NOMORGANISAT VARCHAR(255))
CREATE MEMORY TABLE PUBLIC.PAIEMENT(MONTANT DOUBLE NOT NULL,DATE TIMESTAMP NOT NULL,ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDUSER BIGINT NOT NULL,STATUT VARCHAR(255) NOT NULL,CHECK((PUBLIC.PAIEMENT.STATUT) IN (('EN_ATTENTE'),('VALIDE'),('REFUSE'),('REMBOURSE'))))
ALTER TABLE PUBLIC.PAIEMENT ALTER COLUMN ID RESTART WITH 1
CREATE MEMORY TABLE PUBLIC.ROLE_ARTISTE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,LIBELLE VARCHAR(255))
ALTER TABLE PUBLIC.ROLE_ARTISTE ALTER COLUMN ID RESTART WITH 4
CREATE MEMORY TABLE PUBLIC.TYPE_TICKET(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,LIBELLE VARCHAR(255))
ALTER TABLE PUBLIC.TYPE_TICKET ALTER COLUMN ID RESTART WITH 4
CREATE MEMORY TABLE PUBLIC.USER_ROLE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,LIBELLE VARCHAR(255))
ALTER TABLE PUBLIC.USER_ROLE ALTER COLUMN ID RESTART WITH 4
CREATE MEMORY TABLE PUBLIC.USERS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IDROLE BIGINT,EMAIL VARCHAR(255),MDP VARCHAR(255),NOM VARCHAR(255),CONSTRAINT FKC0BQ72MCFAH0Y321FNQPQUFEB FOREIGN KEY(IDROLE) REFERENCES PUBLIC.USER_ROLE(ID))
ALTER TABLE PUBLIC.USERS ALTER COLUMN ID RESTART WITH 1
ALTER TABLE PUBLIC.ARTISTE ADD CONSTRAINT FK84Y39KWM38DSQYGVD68TDCWFP FOREIGN KEY(IDROLE) REFERENCES PUBLIC.ROLE_ARTISTE(ID)
ALTER TABLE PUBLIC.ARTISTE_GENRE ADD CONSTRAINT FK7XJXNBA7TN2TLGNWH3WIBL6VP FOREIGN KEY(ID_GENRE) REFERENCES PUBLIC.GENRE_MUSICAL(ID)
ALTER TABLE PUBLIC.BILLETS_VENDUS ADD CONSTRAINT FK5YWVB9AC9M5Y7OOXHP71C6JSJ FOREIGN KEY(IDEVENTCATEG) REFERENCES PUBLIC.EVENTS_CATEGORY(ID)
ALTER TABLE PUBLIC.BILLETS_VENDUS ADD CONSTRAINT FKQG87JFPJJ7774M7EN9GS8ULF5 FOREIGN KEY(IDPAIEMENT) REFERENCES PUBLIC.PAIEMENT(ID)
ALTER TABLE PUBLIC.EVENT_GUESTS ADD CONSTRAINT FKPHJW3HS11IYOVYHO5TG7COUM9 FOREIGN KEY(ID_EVENT) REFERENCES PUBLIC.EVENTS(ID)
ALTER TABLE PUBLIC.EVENTS ADD CONSTRAINT FKRV2D7QQOQ4N4K2PUNDO7W31L6 FOREIGN KEY(IDGENREMUSICAL) REFERENCES PUBLIC.GENRE_MUSICAL(ID)
ALTER TABLE PUBLIC.EVENTS ADD CONSTRAINT FKBW8MDS5M56JOCY07I6XRWWFWS FOREIGN KEY(IDORGANIZER) REFERENCES PUBLIC.ORGANIZER(IDUSER)
ALTER TABLE PUBLIC.EVENTS_CATEGORY ADD CONSTRAINT FKD1YQ3M8CLA58KLIF5ORKHS3QT FOREIGN KEY(ID_TYPETICKET) REFERENCES PUBLIC.TYPE_TICKET(ID)
ALTER TABLE PUBLIC.FAVORIS ADD CONSTRAINT FK9BTC3MHP4JXM9SEY06BFTCY4U FOREIGN KEY(IDUSER) REFERENCES PUBLIC.USERS(ID)
ALTER TABLE PUBLIC.HISTORIQUE_EVENT ADD CONSTRAINT FK2ATANOKG8VRCTBN330UXCMPF2 FOREIGN KEY(IDUSER) REFERENCES PUBLIC.USERS(ID)
ALTER TABLE PUBLIC.ORGANIZER ADD CONSTRAINT FKM7EP5CXDJGW1BT2JXXUKF88OA FOREIGN KEY(IDUSER) REFERENCES PUBLIC.USERS(ID)
ALTER TABLE PUBLIC.PAIEMENT ADD CONSTRAINT FK5JU8PAK7U6VDB83IFYWRCJPCS FOREIGN KEY(IDUSER) REFERENCES PUBLIC.USERS(ID)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 1
ALTER SEQUENCE PUBLIC.DEPARTMENT_SEQ RESTART WITH 1
ALTER SEQUENCE PUBLIC.EMPLOYEE_SEQ RESTART WITH 1
SET DATABASE DEFAULT INITIAL SCHEMA PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CARDINAL_NUMBER TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.YES_OR_NO TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CHARACTER_DATA TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.SQL_IDENTIFIER TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.TIME_STAMP TO PUBLIC
GRANT DBA TO SA
SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
SET SCHEMA PUBLIC
INSERT INTO GENRE_MUSICAL VALUES(1,'Rock')
INSERT INTO GENRE_MUSICAL VALUES(2,'Electro')
INSERT INTO GENRE_MUSICAL VALUES(3,'Jazz')
INSERT INTO GENRE_MUSICAL VALUES(4,'Hip-Hop')
INSERT INTO ROLE_ARTISTE VALUES(1,'Headliner')
INSERT INTO ROLE_ARTISTE VALUES(2,'Support')
INSERT INTO ROLE_ARTISTE VALUES(3,'DJ')
INSERT INTO TYPE_TICKET VALUES(1,'Standard')
INSERT INTO TYPE_TICKET VALUES(2,'VIP')
INSERT INTO TYPE_TICKET VALUES(3,'Early Bird')
INSERT INTO USER_ROLE VALUES(1,'ADMIN')
INSERT INTO USER_ROLE VALUES(2,'ORGANISATEUR')
INSERT INTO USER_ROLE VALUES(3,'CLIENT')
